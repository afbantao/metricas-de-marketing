<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Métricas de Marketing - Dashboard Competitivo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
</head>
<body>
    <!-- Header -->
    <nav class="navbar navbar-dark bg-primary shadow-sm">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="bi bi-graph-up"></i> Simulador de Métricas de Marketing
            </span>
            <div class="d-flex align-items-center">
                <span class="text-white me-3" id="currentDateTime"></span>
                <button class="btn btn-light btn-sm" onclick="toggleDarkMode()">
                    <i class="bi bi-moon-fill"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid mt-3">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-2">
                <div class="card shadow-sm mb-3">
                    <div class="card-body">
                        <h6 class="card-title">Seleção de Empresa</h6>
                        <select class="form-select" id="companySelector">
                            <option value="all">Todas as Empresas</option>
                            <option value="techpro">TechPro Solutions</option>
                            <option value="innovatech">InnovaTech Digital</option>
                            <option value="smartmarketing">SmartMarketing Co</option>
                            <option value="digitalwave">Digital Wave Agency</option>
                            <option value="nexusbrands">Nexus Brands Group</option>
                        </select>
                    </div>
                </div>

                <div class="card shadow-sm mb-3">
                    <div class="card-body">
                        <h6 class="card-title">Período de Análise</h6>
                        <select class="form-select mb-2" id="periodSelector">
                            <option value="realtime">Tempo Real</option>
                            <option value="today">Hoje</option>
                            <option value="week">Última Semana</option>
                            <option value="month">Último Mês</option>
                            <option value="quarter">Último Trimestre</option>
                            <option value="year">Último Ano</option>
                            <option value="2years">Últimos 2 Anos</option>
                        </select>
                        <input type="date" class="form-control mb-2" id="startDate">
                        <input type="date" class="form-control" id="endDate">
                    </div>
                </div>

                <div class="card shadow-sm">
                    <div class="card-body">
                        <h6 class="card-title">Categorias de Métricas</h6>
                        <div class="nav flex-column nav-pills" id="metrics-tab">
                            <button class="nav-link active" data-category="overview">
                                <i class="bi bi-speedometer2"></i> Visão Geral
                            </button>
                            <button class="nav-link" data-category="financial">
                                <i class="bi bi-currency-euro"></i> Financeiras
                            </button>
                            <button class="nav-link" data-category="customers">
                                <i class="bi bi-people"></i> Clientes
                            </button>
                            <button class="nav-link" data-category="market">
                                <i class="bi bi-globe"></i> Mercado
                            </button>
                            <button class="nav-link" data-category="sales">
                                <i class="bi bi-cart"></i> Vendas
                            </button>
                            <button class="nav-link" data-category="product">
                                <i class="bi bi-box"></i> Produto/Preço
                            </button>
                            <button class="nav-link" data-category="digital">
                                <i class="bi bi-laptop"></i> Digital
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard -->
            <div class="col-md-10">
                <!-- Real-time Status Bar -->
                <div class="alert alert-info d-flex justify-content-between align-items-center mb-3" id="statusBar">
                    <div>
                        <i class="bi bi-broadcast"></i>
                        <strong>Status:</strong> <span id="statusText">Conectado - Dados em tempo real</span>
                    </div>
                    <div>
                        <span class="badge bg-success" id="updateIndicator">
                            <i class="bi bi-circle-fill blinking"></i> Ao Vivo
                        </span>
                        <span class="ms-2">Última atualização: <span id="lastUpdate"></span></span>
                    </div>
                </div>

                <!-- KPI Cards -->
                <div class="row mb-3" id="kpiCards">
                    <div class="col-md-3">
                        <div class="card shadow-sm kpi-card">
                            <div class="card-body">
                                <h6 class="text-muted">Vendas Totais</h6>
                                <h3 class="mb-0" id="totalSales">€0</h3>
                                <small class="text-success">
                                    <i class="bi bi-arrow-up"></i> <span id="salesGrowth">0%</span>
                                </small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card shadow-sm kpi-card">
                            <div class="card-body">
                                <h6 class="text-muted">ROI Marketing</h6>
                                <h3 class="mb-0" id="roiMarketing">0%</h3>
                                <small class="text-success">
                                    <i class="bi bi-arrow-up"></i> <span id="roiChange">0%</span>
                                </small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card shadow-sm kpi-card">
                            <div class="card-body">
                                <h6 class="text-muted">Quota de Mercado</h6>
                                <h3 class="mb-0" id="marketShare">0%</h3>
                                <small class="text-danger">
                                    <i class="bi bi-arrow-down"></i> <span id="shareChange">0%</span>
                                </small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card shadow-sm kpi-card">
                            <div class="card-body">
                                <h6 class="text-muted">Clientes Ativos</h6>
                                <h3 class="mb-0" id="activeCustomers">0</h3>
                                <small class="text-success">
                                    <i class="bi bi-arrow-up"></i> <span id="customersGrowth">0%</span>
                                </small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Content Area -->
                <div class="row">
                    <!-- Charts Section -->
                    <div class="col-md-8">
                        <div class="card shadow-sm mb-3">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">Evolução Temporal</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="mainChart" height="100"></canvas>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="card shadow-sm mb-3">
                                    <div class="card-header bg-white">
                                        <h6 class="mb-0">Distribuição de Quota de Mercado</h6>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="marketShareChart" height="150"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card shadow-sm mb-3">
                                    <div class="card-header bg-white">
                                        <h6 class="mb-0">Performance Digital</h6>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="digitalChart" height="150"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Metrics Table -->
                    <div class="col-md-4">
                        <div class="card shadow-sm mb-3">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">Métricas Detalhadas</h5>
                            </div>
                            <div class="card-body" style="max-height: 600px; overflow-y: auto;">
                                <div id="metricsTable">
                                    <!-- Dynamically populated -->
                                </div>
                            </div>
                        </div>

                        <!-- Competitor Analysis -->
                        <div class="card shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">Análise Competitiva</h5>
                            </div>
                            <div class="card-body">
                                <div id="competitorAnalysis">
                                    <!-- Dynamically populated -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Export Section -->
                <div class="card shadow-sm mt-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h6 class="mb-0">Exportar Dados</h6>
                            <div>
                                <button class="btn btn-sm btn-outline-primary" onclick="exportData('csv')">
                                    <i class="bi bi-file-earmark-csv"></i> CSV
                                </button>
                                <button class="btn btn-sm btn-outline-primary" onclick="exportData('json')">
                                    <i class="bi bi-file-earmark-code"></i> JSON
                                </button>
                                <button class="btn btn-sm btn-outline-primary" onclick="exportData('excel')">
                                    <i class="bi bi-file-earmark-excel"></i> Excel
                                </button>
                                <button class="btn btn-sm btn-outline-primary" onclick="printReport()">
                                    <i class="bi bi-printer"></i> Imprimir
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-light mt-5 py-3">
        <div class="container text-center">
            <small class="text-muted">
                Simulador de Métricas de Marketing - IPP © 2025 |
                Dados simulados para fins educacionais
            </small>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="data-generator.js"></script>
    <script src="metrics-calculator.js"></script>
    <script src="app.js"></script>
</body>
</html>